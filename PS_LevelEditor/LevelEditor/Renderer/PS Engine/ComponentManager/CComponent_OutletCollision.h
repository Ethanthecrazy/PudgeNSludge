/////////////////////////////////////////////////////////////////////////////////////////////////////
// Class Name: CComponent_OutletCollision
//
// Purpose: Handle all collisions for the plug object
//
// Original Author: Rueben Massey
//
// Creation Date: 6/4/2012
//
// Last Modification By: 
// Last Modification Date: 
/////////////////////////////////////////////////////////////////////////////////////////////////////
#ifndef CCOMPONENT_OUTLETCOLLISION_H_
#define CCOMPONENT_OUTLETCOLLISION_H_

#include "CComponent_Collision.h"

// FORWARD DECLARATIONS
class IBaseObject;

__declspec(align(32))
class CComponent_OutletCollision : public CComponent_Collision
{

private:
	// pointer to the bridge this
	// plug is associated with
	IBaseObject* m_pAssociatedObj;
	bool m_bIsPlugged;

	// Variables used for plugging action
	bool m_bIsGettingPlugged;
	CComponent_Collision* m_pPlug;


	// Attribs
	int m_nChannel;
	int m_nDirection;
	// Pionter to the collision volume
	AABB* m_pCollisionObject;

	// bounding box for
	// the plug
	AABB m_OutletAABB;

public:

	/////////////////////////////
	//  Accessors
	/////////////////////////////
	IBaseObject* GetAssociatedObj() const { return m_pAssociatedObj; }
	int GetChannel() const { return m_nChannel; }
	int GetDirection() const { return m_nDirection; }

	/////////////////////////////
	//  Mutators
	/////////////////////////////
	void SetAssociatedObj(IBaseObject* val) { m_pAssociatedObj = val; }
	void SetChannel(int val) { m_nChannel = val; }
	void SetDirection(int val) { m_nDirection = val; }

	CComponent_OutletCollision();
	~CComponent_OutletCollision();

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Function Name: Initialize()
	// Purpose: Initialize all data members
	// Original Author: Rueben Massey
	// Creation Date: 6/4/2012
	// Last Modification By: 
	// Last Modification Date: 
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	bool Initialize( );

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Function Name: Update()
	// Purpose: Update all data members
	// Original Author: Rueben Massey
	// Creation Date: 6/4/2012
	// Last Modification By: 
	// Last Modification Date: 
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void Update( float fDT );

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Function Name: Shutdown()
	// Purpose: clean up memory
	// Original Author: Rueben Massey
	// Creation Date: 6/4/2012
	// Last Modification By: 
	// Last Modification Date: 
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void Shutdown(void);

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Function Name: CheckCollisions()
	// Purpose: Check for collision	and react appropriately
	// Original Author: Rueben Massey
	// Creation Date: 6/13/2012
	// Last Modification By: 
	// Last Modification Date: 
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void CheckCollisions( float fDT );

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Function Name: CheckPlugCollisions()
	// Purpose: Check for collision	and react appropriately
	// Original Author: Rueben Massey
	// Creation Date: 6/16/2012
	// Last Modification By: 
	// Last Modification Date: 
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void CheckPlugCollisions( float fDT );

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Function Name: CheckDynamicCollisions()
	// Purpose: Check collisions with all dynamic objects
	// Original Author: Rueben Massey
	// Creation Date: 6/13/2012
	// Last Modification By: 
	// Last Modification Date: 
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void CheckDynamicCollisions( CComponent_Collision* pCurCollision, CCollisionVolume* pCurVolume, float fDT );

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Function Name: MovePlug()
	// Purpose: move the plug to the correct position
	// Original Author: Rueben Massey
	// Creation Date: 6/14/2012
	// Last Modification By: 
	// Last Modification Date: 
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void MovePlug( float fDT );
};
#endif //CCOMPONENT_OUTLETCOLLISION_H_